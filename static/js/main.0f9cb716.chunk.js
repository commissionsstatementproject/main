(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,a,t){e.exports=t(55)},32:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},43:function(e,a){},45:function(e,a){},55:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(24),o=t.n(s),l=(t(32),t(3)),i=function(e){var a=new FileReader;return new Promise(function(t,n){a.onerror=function(){a.abort(),n(new DOMException("Problem parsing input file."))},a.onload=function(){t(a.result)},a.readAsText(e)})},c=t(6),m=t.n(c),u=t(13),d=function(e){throw new Error("HomeValidationError: ".concat(e))},f=function(){var e=Object(u.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a?a.size>5e5&&("This file is HUGE! What are you trying to upload?",d("This file is HUGE! What are you trying to upload?")):("Please select a file before generating a statement!",d("Please select a file before generating a statement!"));case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a||("Please enter the salesperson's name before generating a statement!",d("Please enter the salesperson's name before generating a statement!"));case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}();t(34);var v=function(e){var a=e.setCsvString,t=e.salespersonName,n=e.handleSalespersonNameChange,s=e.handleSignatureImageURLChange,o=r.a.useState(null),c=Object(l.a)(o,2),m=c[0],u=c[1],d=r.a.useState(null),v=Object(l.a)(d,2),g=v[0],E=v[1];return r.a.createElement("div",{className:"home-container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f(m).then(function(){return p(t)}).then(function(){return i(m)}).then(function(e){return a(e)}).catch(function(e){return alert(e)})},"data-testid":"home",className:"form-container"},r.a.createElement("div",{className:"form-heading open-sans"},"Commission Statement Generator"),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",{className:"open-sans section-heading"},r.a.createElement("div",{className:"section-heading"},"Salesperson's Name:"),r.a.createElement("input",{type:"text",className:"text-input text open-sans",placeholder:"salesperson name","data-testid":"salesPersonName",onChange:n,value:t}))),r.a.createElement("div",{className:"form-section open-sans"},r.a.createElement("div",null,r.a.createElement("span",null,"CSV file:"),r.a.createElement("span",{className:"file-input-container"},r.a.createElement("label",{className:"file-input"},"Browse",r.a.createElement("input",{type:"file",accept:".csv","data-testid":"fileSelect",onChange:function(e){return u(e.target.files[0])},className:"hide"})))),r.a.createElement("div",{className:"small"},"Selected file: ",m?m.name:"none")),r.a.createElement("div",{className:"form-section open-sans"},r.a.createElement("div",null,r.a.createElement("span",null,"Signature Image (optional):"),r.a.createElement("span",{className:"file-input-container"},r.a.createElement("label",{className:"file-input"},"Browse",r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){s(e),E(e.target.files[0].name)},className:"hide"})))),r.a.createElement("div",{className:"small"},"Selected signature image:"," ",g||"none")),r.a.createElement("div",{className:"submit-button-container open-sans"},r.a.createElement("input",{className:"submit-button open-sans",type:"submit",value:"Generate Statement","data-testid":"generateButton"})),r.a.createElement("div",{className:"extra-information open-sans"},"This is an internal app made by"," ",r.a.createElement("a",{href:"https://jigsaw.thoughtworks.net/consultants/23558"},"Rahul Rakshit")," ","for ThoughtWorks UK to auto-generate commission statements for demand team members. For more information and the source code take a look at the"," ",r.a.createElement("a",{href:"https://github.com/commissionsstatementproject/main"},"GitHub repository"),".")))};t(35);var g=function(e){var a=e.data;return r.a.createElement("div",{"data-testid":"nameAndDate"},r.a.createElement("div",{className:"text open-sans"},"Name: ",a.salespersonName),r.a.createElement("div",{className:"date text open-sans"},"Date: ",a.paymentNotificationDate))};var E=function(e){var a=e.data,t=a.paymentNotificationDate.slice(-4);return r.a.createElement("div",{className:"text open-sans bold"},r.a.createElement("b",null,"Your Sales Incentive Variable Pay Earnings Quarter ",a.quarter,"/",t," ","- Notification Payout Amount"))};t(36);var h=function(){return r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:"ThoughtWorks-logo.jpg",alt:"ThoughtWorks logo",className:"logo-img","data-testid":"logoImg"}))};var b=function(e){var a=e.data;return r.a.createElement("div",{"data-testid":"preTableText"},r.a.createElement("div",{className:"text open-sans"},"We highly appreciate your efforts and contributions over the last quarter. With this notification we would like to confirm the amount of your sales incentive variable pay reflecting the target achievement of Quarter ",a.quarter,"."),r.a.createElement("div",{className:"text open-sans bold"},"Quarterly Sales Incentive Target Amount for Quarter ",a.quarter,": \xa3",a.quarterlyVariableTarget))};var y=function(e){var a=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(g,{data:a}),r.a.createElement(E,{data:a}),r.a.createElement(b,{data:a}))};t(37);var N=function(e){var a=e.data;return r.a.createElement("div",{"data-testid":"payEarningsTable"},r.a.createElement("div",{className:"text open-sans bold","data-testid":"tableHeading"},"Sales Incentive Variable Pay Earnings for Quarter ",a.quarter),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{"data-testid":"tableComponent"},r.a.createElement("th",{className:"text open-sans bold"},"Component (\xa3)"),r.a.createElement("th",{className:"text open-sans bold"},"Component Target Compensation"),r.a.createElement("th",{className:"text open-sans bold"},"Component Achievement Level*"),r.a.createElement("th",{className:"text open-sans bold"},"Payout Amount"))),r.a.createElement("tbody",null,r.a.createElement("tr",{"data-testid":"tableCountryTeam"},r.a.createElement("td",{className:"text open-sans"},"Country / Team"),r.a.createElement("td",{className:"text open-sans"},a.countryVariableTargetPay),r.a.createElement("td",{className:"text open-sans"},a.percentOfCountryRevenueAchieved),r.a.createElement("td",{className:"text open-sans"},a.countryVariablePayEarned)),r.a.createElement("tr",{"data-testid":"tableIndividualRevenue"},r.a.createElement("td",{className:"text open-sans"},"Individual Revenue"),r.a.createElement("td",{className:"text open-sans"},a.individualVariableTargetPay),r.a.createElement("td",{className:"text open-sans"},a.percentOfIndividualTargetAchieved),r.a.createElement("td",{className:"text open-sans"},a.individualVariablePayEarned)),r.a.createElement("tr",{"data-testid":"tableIndividualSales"},r.a.createElement("td",{className:"text open-sans"},"Individual Sales"),r.a.createElement("td",{className:"text open-sans"},a.sowSignedVariableTargetPay),r.a.createElement("td",{className:"text open-sans"},a.percentOfAtlTargetAchieved),r.a.createElement("td",{className:"text open-sans"},a.atlVariablePayEarned)))),r.a.createElement("div",{className:"text open-sans small","data-testid":"tableFooter"},"*The sales incentive variable compensation payment is calculated based on the multiplier and formula defined in your Individual Plan document using the achievement level as the input. Please refer to your Individual Plan for further details."))};t(38);var w=function(e){var a=e.signatureImageURL;return r.a.createElement("div",{className:"text open-sans","data-testid":"signature"},"Thanks again.",function(e){return e?r.a.createElement("img",{src:e,alt:"signature",className:"signature-img"}):r.a.createElement("div",null,r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null)," ",r.a.createElement("br",null))}(a),"Head of Sales/Demand")};var x=function(){return r.a.createElement("div",{className:"text open-sans small","data-testid":"asterisks"},"** Please note that this discretionary sales incentive pay has been awarded without commitment for future discretionary payments. A legal entitlement to a repeated or permanent grant of the discretionary payment does not exist and no rights can be derived for the future from the payment of this discretionary payment.")};var C=function(e){var a=e.data;return r.a.createElement("div",{"data-testid":"postTableText"},r.a.createElement("div",{className:"text open-sans"},"The total gross sales incentive variable pay is: \xa3",a.totalVariablePayEarned),r.a.createElement("div",{className:"text open-sans bold"},"Sales Incentive Boosters:"),r.a.createElement("div",{className:"text open-sans"},"The total gross booster pay is: \xa3",a.boostersClaimed),r.a.createElement("div",{className:"text open-sans bold"},"The total gross Sales incentive payout is: \xa3",a.totalVariableCompensation),r.a.createElement("div",{className:"text open-sans"},"If you have any questions, please feel free to reach out to the people team / HOD / Sales Operations or HOD Finance. The payment will be made to you with your regular payroll."))};var S=function(e){var a=e.data,t=e.signatureImageURL;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{data:a}),r.a.createElement(w,{signatureImageURL:t}),r.a.createElement(x,null))};var T=function(){return r.a.createElement("div",{"data-testid":"statementError"},'"The statement could not be generated due to errors in the sheet."')},I=function(e){if("string"!==typeof e)throw new Error("SheetError: Sheet must be initialized with csv data as a string")},P=function(e){if(!e.match(/^[A-Za-z]{1,3}[0-9]{1,4}$/))throw new Error("SheetError: cell address for #getCell is invalid")},q=function(e){if(!e.match(/^[A-Za-z]{1,3}$/))throw new Error("SheetError: column address for #getColumn is invalid")},O=function(e){var a=e.letter,t=e.number;return{columnIndex:A[a],rowIndex:parseInt(t)-1}},V=function(e){return{letter:e.replace(/[^A-Za-z]/g,"").toLowerCase(),number:e.replace(/[^0-9]/g,"")}},A={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7,i:8,j:9,k:10,l:11,m:12,n:13,o:14,p:15,q:16,r:17,s:18,t:19,u:20,v:21,w:22,x:23,y:24,z:25,aa:26,ab:27,ac:28,ad:29,ae:30,af:31,ag:32,ah:33,ai:34,aj:35},j=t(25);var k=function(e){I(e);var a=j.parse(e);return{sheet:a,getCell:function(e){P(e);var t=V(e),n=t.letter,r=t.number,s=O({letter:n,number:r}),o=s.columnIndex,l=s.rowIndex,i=a[l];return i?i[o]:void 0},getColumn:function(e){q(e);var t=e.replace(/[^A-Za-z]/g,"").toLowerCase(),n=A[t],r=a.map(function(e){return e[n]});return r.every(function(e){return!e})?[]:r}}},R=/^(([0-9]{0,3}[,]?[0-9]{1,3}[.]?[0-9]{0,2})|-)$/,L=/^[0-9]{1,4}[.]?[0-9]{0,2}[^.]%$/,U={salespersonName:{required:!0,address:"B",format:/^[a-zA-Z ]{2,255}$/},quarterlyVariableTarget:{required:!0,address:"D",format:R},countryVariableTargetPay:{required:!0,address:"E",format:R},percentOfCountryRevenueAchieved:{required:!0,address:"O",format:L},countryVariablePayEarned:{required:!0,address:"U",format:R},individualVariableTargetPay:{required:!0,address:"F",format:R},percentOfIndividualTargetAchieved:{required:!0,address:"P",format:L},individualVariablePayEarned:{required:!0,address:"V",format:R},sowSignedVariableTargetPay:{required:!0,address:"G",format:R},percentOfAtlTargetAchieved:{required:!0,address:"Q",format:L},atlVariablePayEarned:{required:!0,address:"W",format:R},totalVariablePayEarned:{required:!0,address:"X",format:R},boostersClaimed:{required:!0,address:"AE",format:R},totalVariableCompensation:{required:!0,address:"AF",format:R}},D={paymentNotificationDate:{required:!0,address:"I6",format:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/},quarter:{required:!0,address:"E2",format:/^[1|2|3|4]$/}},z=t(26),F=t.n(z),H=function(e){return new Error("ExtractionError: ".concat(e))},W=function(e){var a=e.getColumn,t=e.salespersonName,n=a(U.salespersonName.address).findIndex(function(e){return e.trim().toLowerCase()===t.trim().toLowerCase()});return parseInt(n)+1},$=function(e){return e>0},B=function(e){var a=e.getCell,t=e.rowNumber,n={},r=Object.keys(U),s=Object.keys(D);return r.forEach(function(e){var r=U[e].address;n[e]=a(r+t)}),s.forEach(function(e){n[e]=a(D[e].address)}),n},G=function(e){var a=e.data,t=e.rowNumber,n=Object.keys(a).filter(function(e){return"salespersonName"!==e}),r=function(e){var a=F()(U);return Object.keys(a).forEach(function(t){return a[t].address+=e}),Object.assign({},a,D)}(t),s=[];return n.forEach(function(e){var t=r[e].required,n=r[e].format;t&&""===a[e]?s.push(H("".concat(e," at ").concat(r[e].address," must not be empty"))):a[e].match(n)||s.push(H("".concat(e," at ").concat(r[e].address," has wrong format")))}),s};var Q=function(e){var a=e.salespersonName,t=e.getCell,n=e.getColumn,r=W({getColumn:n,salespersonName:a});if(!$(r))return{errors:[H("Salesperson not found")]};var s=B({getCell:t,rowNumber:r}),o=G({data:s,rowNumber:r});return s.errors=o,s},Z=function(e){var a=e.join("\n");alert(a)};var J=function(e){var a=e.csvString,t=e.salespersonName,n=e.signatureImageURL,s=k(a),o=s.getCell,l=s.getColumn,i=Q({getCell:o,getColumn:l,salespersonName:t});return r.a.useEffect(function(){i&&0===i.errors.length&&setTimeout(window.print,500)}),i?0!==i.errors.length?(Z(i.errors),r.a.createElement(T,null)):r.a.createElement("div",{"data-testid":"statement"},r.a.createElement(y,{data:i}),r.a.createElement(N,{data:i}),r.a.createElement(S,{data:i,signatureImageURL:n})):r.a.createElement(T,null)};var K=function(){var e=r.a.useState(""),a=Object(l.a)(e,2),t=a[0],n=a[1],s=r.a.useState(null),o=Object(l.a)(s,2),i=o[0],c=o[1],m=r.a.useState(""),u=Object(l.a)(m,2),d=u[0],f=u[1];return t?r.a.createElement(J,{csvString:t,salespersonName:d,signatureImageURL:i}):r.a.createElement(v,{salespersonName:d,handleSalespersonNameChange:function(e){return f(e.target.value)},handleSignatureImageURLChange:function(e){return c(URL.createObjectURL(e.target.files[0]))},setCsvString:n})};o.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.0f9cb716.chunk.js.map